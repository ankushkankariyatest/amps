!function(){"use strict";define("bootstrap-popup",["angularAMD","bootstrap","ui-bootstrap"],function(){var e=angular.module("bootstrap-popup",["ui.bootstrap"]);e.factory("popupService",["$q","modalService","appConstantPath","$timeout",function(L,t,r,M){var e={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"",windowClass:"default-popup"},a=function(){e.windowClass="feedback-popup",e.templateUrl=r.feedback.templateUrl,t.showModal(e,{})},s=function(){t.close(),e.windowClass="default-popup",e.templateUrl=r.feedback.successUrl,t.showModal(e,{})},n=function(){t.close(),e.windowClass="default-popup",e.templateUrl=r.feedback.failureUrl,t.showModal(e,{})},i=function(){e.windowClass="default-popup",e.templateUrl=r.infrastructure.templateUrl,t.showModal(e,{})},c=function(o){e.windowClass="default-popup",e.templateUrl=r.application[o].moreDetailsTemplateUrl,t.showModal(e,{})},u=function(){return t.close(),e.windowClass="default-popup",e.templateUrl=r.logOutPopup.templateUrl,t.showModal(e,{})},p=function(o){e.windowClass="default-popup",e.templateUrl=r[o].templateUrl,t.showModal(e,{})},d=function(o){e.windowClass="default-popup",e.templateUrl=r.permalink.templateUrl,t.showModal(e,o)},m=function(r){e.windowClass="default-popup",e.templateUrl=r,t.showModal(e,{})},o=function(r){e.windowClass="bacr-popup",e.templateUrl=r,t.showModal(e,{})},h=function(r){e.windowClass="bacr-popup",e.templateUrl=r,t.showModal(e,{})},g=function(){t.close(),e.windowClass="default-popup",e.templateUrl=r.application.certify.successUrl,t.showModal(e,{})},U=function(){t.close(),e.windowClass="default-popup",e.templateUrl=r.application.certify.failureUrl,t.showModal(e,{})},w=function(){e.windowClass="default-popup",e.templateUrl=r.siteExcelImport.groupModalUrl,t.showModal(e,{})},v=function(o){e.windowClass="default-popup",e.templateUrl=r.siteExcelImport.successPopupUrl,t.showModal(e,o)},b=function(r,o){e.windowClass="bacr-popup",e.templateUrl=r,t.showModal(e,o)},y=function(r){e.windowClass="bacr-popup",e.templateUrl="app/modules/site-utility-module/templates/site-tabs/site-general-details.html",t.showModal(e,r)},S=function(){t.close()},k=function(r){e.windowClass="bacr-popup",e.templateUrl="app/modules/site-utility-module/templates/site-utility-history-popup.html",t.showModal(e,r)},P=function(r){return e.windowClass="bacr-popup",e.templateUrl="app/modules/site-utility-module/templates/site-utility-history-compare-popup.html",t.showModal(e,r)},A=function(r){return e.windowClass="default-popup",e.templateUrl="app/modules/site-utility-module/templates/site-utility-history-compare-popup.html",t.showModal(e,r)},f=function(r){return e.windowClass="default-popup",e.templateUrl="app/modules/common/templates/confirmation-popup.html",t.showModal(e,r)},l=function(o){return e.windowClass="feedback-popup",e.templateUrl=r.enterpriseAccess.templateUrl,t.showModal(e,o)};return{showFeedbackPopup:a,showFeedbackSuccess:s,showFeedbackError:n,showInfrastructurePopup:i,showInfrastructureDetails:c,showPopup:p,closePopup:S,openLogOutPopup:u,showPermalinkPopup:d,showApplicationPopup:m,showApplicationSystemInfoPopup:h,showApplicationBacrPopup:o,showCertifySuccess:g,showCertifyError:U,showOnboardingPopup:b,showSiteUtils:y,showGroupPopup:w,importSuccessPopup:v,showSiteHistoryDetails:k,showSiteHistoryCompareDetails:P,showSiteHistoryNoComparePopup:A,showDeletePermissionPopup:f,showEnterpriseAccessPopup:l}}]),e.service("modalService",["$modal",function(t){var r={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"",windowClass:""},o={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)};var e;this.show=function(s,n){var l={},a={};return angular.extend(l,r,s),angular.extend(a,o,n),l.controller||(l.controller=["$scope","$modalInstance",function(t,r){t.modalOptions=a,t.modalOptions.ok=function(e){r.close(e)},t.modalOptions.close=function(e){r.dismiss("cancel")},e=r}]),t.open(l).result},this.close=function(){void 0!=e&&e.close()}}])})}(),function(){"use strict";define("authentication-factory",["angularAMD"],function(){var e=angular.module("assetItAuthentication",[]);e.factory("authenticationFactory",["$cacheFactory","$window","userRoles",function(o,e,t){var r={isLogged:!1,fullName:"",user:"",userRole:[],userRoles:t,isAuthenticated:!1,workOrder:"",check:function(){e.localStorage.token&&e.localStorage.user?this.isLogged=!0:(this.isLogged=!1,delete this.user)},setInfo:function(t){this.fullName=t.user.username,this.user=t.user.email,this.lanid=t.user.LAN_ID,this.userRole=t.user.roles,this.workOrder=t.user.workOrder,e.localStorage.token=t.token,e.localStorage.fullName=this.fullName,e.localStorage.user=this.user,e.localStorage.lanid=this.lanid,e.localStorage.userRole=this.userRole?JSON.stringify(this.userRole):"",e.localStorage.workOrder=this.workOrder},setAuthInfoFromStorage:function(){this.fullName=e.localStorage.fullName,this.user=e.localStorage.user,this.lanid=e.localStorage.lanid;try{this.userRole=JSON.parse(e.localStorage.userRole)}catch(t){this.userRole=[]}this.workOrder=e.localStorage.workOrder},clearInfo:function(){this.isLogged=!1,this.isAuthenticated=!1,delete this.fullName,delete this.user,delete this.lanid,delete this.userRole,delete this.workOrder,delete e.localStorage.fullName,delete e.localStorage.token,delete e.localStorage.user,delete e.localStorage.lanid,delete e.localStorage.userRole,delete e.localStorage.workOrder,e.currentRoute=void 0},isValidToken:function(){return e.localStorage.token},getAuthToken:function(){return"Bearer "+e.localStorage.token},getUserName:function(){return e.localStorage.user},setWorkOrder:function(t){e.localStorage.workOrder=t,this.workOrder=t}};return r}]),e.factory("tokenInterceptor",["$q","$location","authenticationFactory",function(t,r,e){return{request:function(t){return t.headers=t.headers||{},e.isValidToken()&&(t.headers.Authorization=e.getAuthToken()),t},requestError:function(e){return t.reject(e)},response:function(r){return null!=r&&200==r.status&&e.isValidToken()&&!e.isAuthenticated&&(e.isAuthenticated=!0),r||t.when(r)},responseError:function(o){return null!=o&&403===o.status&&(e.isValidToken()||e.isAuthenticated)&&(e.clearInfo(),e.isAuthenticated=!1,r.path("/login")),t.reject(o)}}}])})}(),function(){"use strict";define("auth-model",["angularAMD"],function(){var e=angular.module("assetItAuthentication");e.factory("loginModel",function(){var t={username:"",password:""},e={};return e.initializeModel=function(){return{username:"",password:""}},e.getModel=function(){return t},e.updateModel=function(e){t=e,t.username=e.username},e.getUsername=function(){return t.username},e.getPassword=function(){return t.password},e}),e.factory("registerModel",["$location",function(r){var t={username:"",password:"",supervisorLanId:"",requestAdmin:!1,url:"",urlAdmin:"",requestEnterprise:!1,businessJustification:""},e={};return e.initializeModel=function(){return{username:"",password:"",supervisorLanId:"",requestAdmin:0,url:"",urlAdmin:"",requestEnterprise:0,businessJustification:""}},e.getModel=function(){return t},e.updateModel=function(e){e.requestAdmin=e.requestAdmin?1:0,e.username=String(e.username).toLowerCase(),t=e},e.getUsername=function(){return t.username},e.getPassword=function(){return t.password},e.getSupervisorLanId=function(){return t.supervisorLanId},e.getBusinessJustification=function(){return t.businessJustification},e.getRequestEnterprise=function(){return t.requestEnterprise},e}]),e.factory("forgotPasswordModel",function(){var t={username:"",url:""},e={};return e.initializeModel=function(){return{username:"",url:""}},e.getModel=function(){return t},e.updateModel=function(e){e.username=-1==e.username.indexOf("@")&&4==e.username.length?e.username+"@pge.com":e.username,t=e},e.getUsername=function(){return t.username},e}),e.factory("resetPasswordModel",function(){var t={password:"",cnf_password:""},e={};return e.initializeModel=function(){return{password:"",cnf_password:""}},e.getModel=function(){return t},e.updateModel=function(e){t=e},e.getPassword=function(){return t.password},e.getCnfPassword=function(){return t.cnf_password},e})})}(),function(){"use strict";define("auth-service",["angularAMD","authentication-factory","auth-model"],function(){var e=angular.module("assetItAuthentication");e.factory("authService",["$q","$location","$http","configUrl","authenticationFactory","loginModel","registerModel","forgotPasswordModel","resetPasswordModel","loadingData","svcStorage",function(i,t,n,a,o,m,f,p,h,l,c){var e={},s={isSuccess:!1,message:"Oops! Got an error. Try again"},u=function(e,t){if(a.sendErrorInMail){var r={from:"am4it@wizni.com",to:a.errorEmailReceipient,subject:"AMPS Front End Error",html:"Request <br />"+JSON.stringify(e)+"<br /><br/>Response <br />"+JSON.stringify(t)};n({url:a.baseServiceUrl+"sendemail",method:"POST",data:r}).then()}},r=function(e){l.start(),e.url=a.authServiceUrl+e.url,e.cache=!1;var t=i.defer();return n(e).success(function(e){l.stop(),t.resolve(e)}).error(function(r){l.stop(),u(e,r),t.reject(r)}),t.promise},d=function(e,s,p,d){e.url=a.authServiceUrl+e.url,e.cache=!1;var r=e.url,o=c.get(r),t=i.defer();return o?t.resolve(o):(l.start(),n(e).success(function(e){l.stop(),c.put(r,e),t.resolve(e)}).error(function(r,o,a,s){l.stop(),u(e,r),t.reject(r)})),t.promise};return e.login=function(){var t=m.getModel(),l=/(.*)@.*/.exec(t.username);l&&l.length||(t.username+="@pge.com");var a={method:"POST",url:"loginViaActiveDirectory",data:JSON.stringify(t)},e=i.defer();return r(a).then(function(t){t.isSuccess?(o.isLogged=!0,o.setInfo(t),e.resolve(t)):(o.clearInfo(),e.reject(t))},function(t){e.reject(s)}),e.promise},e.logout=function(){if(o.isLogged){var e={method:"POST",url:"logout",data:JSON.stringify({username:o.user})};a.authServiceUrl+"logout";r(e).then(function(e){},function(e){}),o.clearInfo(),t.path("/login")}},e.register=function(o){var l=t.absUrl().replace(t.path(),""),e=f.getModel(),a=/(.*)@.*/.exec(e.username);a&&a.length||(e.username+="@pge.com"),e.url=l+"/confirmUser/",e.requestAdmin&&(e.urlAdmin=l+"/adminAccess/");var n={method:"POST",url:"registerViaActiveDirectory",data:JSON.stringify(e)};r(n).then(function(e){e.isSuccess?t.path("/successAction/register"):o(e)},function(e){o(s)})},e.registerADUser=function(e){var o=t.absUrl().replace(t.path(),"");return e.url=o+"/confirmUser/",e.requestAdmin&&(e.urlAdmin=o+"/adminAccess/"),r({method:"POST",url:"registerViaActiveDirectory",data:JSON.stringify(e)})},e.forgotPassword=function(e){var l=t.absUrl().replace(t.path(),""),o=p.getModel();o.url=l+"/resetPassword/";var a={method:"POST",url:"forgotPassword",data:JSON.stringify(o)};r(a).then(function(r){r.isSuccess?t.path("/successAction/forgotPassword"):e(r)},function(t){e(s)})},e.resetPassword=function(o,e){var l=h.getModel(),a={method:"POST",url:"resetPassword/"+o,data:JSON.stringify(l)};r(a).then(function(r){r.isSuccess?t.path("/successAction/resetPassword"):e(r)},function(t){e(s)})},e.checkResetLink=function(e){var t={method:"GET",url:"resetPassword/"+e};return r(t)},e.confirmUser=function(e){var t={method:"GET",url:"confirmEmail/"+e};return r(t)},e.adminAccess=function(e){var t={method:"GET",url:"adminAccess/"+e};return r(t)},e.getSplashData=function(){var e="announcement",t={method:"get",url:e};return d(t)},{login:e.login,logout:e.logout,register:e.register,registerADUser:e.registerADUser,forgotPassword:e.forgotPassword,resetPassword:e.resetPassword,checkResetLink:e.checkResetLink,adminAccess:e.adminAccess,confirmUser:e.confirmUser,getSplashData:e.getSplashData}}])})}(),function(){"use strict";define("header-footer",["angularAMD","auth-service","bootstrap-popup"],function(){var e=angular.module("assetItAuthentication");e.factory("headerFooterDecisionMaker",["$document","$q","$compile","authenticationFactory","configOptions","environments","authService",function(o,s,e,l,a,t,n){var r={};return r.defineHeader=function(n){var i=o[0],r=angular.element(i.getElementById("dynamic-header-info")),c=angular.element(i.getElementById("dynamic-footer-info"));if(r.empty(),c.empty(),l.isLogged)r.append(e("<div asset-header></div>")(n)),c.append(e('<div class="asset-footer-anchor">Sprint Version: '+a.frontEndVersion+'<a class="pointer " data-ng-click="openFeedback()" >Feedback?</a></div>')(n));else{var s='<div class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right assetIT-main-top-right"><li class="dropdown"><a class="dropdown-toggle" role="button" data-toggle="dropdown" href="javascript:void(0);"><span class="assetIT-header-nav_welcome_txt">'+t.activeEnvironment+'<span class="caret"></span> </span></a><ul id="environment" class="dropdown-menu" role="menu">';_.each(t.info,function(e,t){s+='<li><a href="'+e.href+'">'+e.text+"</a></li>"}),s+="</ul></li></ul></div>",r.append(s)}},r}]),e.directive("assetHeader",["$window","$location","authenticationFactory","authService","appConstantPath","svcStorage","environments","externalLinks",function(t,r,e,o,l,a,s,n){return{restrict:"AE",templateUrl:l.header.templateUrl,link:function(l,u,p,d,m){l.environments=s;var i=function(){l.menuItems=[],l.disabledItems=[],l.loginActive=!1,l.user="",a.removeAll(),window.localStorage.clear(),o.logout()},c=function(){l.loginActive=e.isLogged,e.isLogged?(l.menuItems=[{text:"Home",routePath:"home",base:"/home",css:"",target:"_self",isDisabled:!1,displayToUi:!0,isExternal:!1},{text:"Applications",routePath:"applications",base:"/applications",css:"",target:"_self",isDisabled:!1,displayToUi:!0,isExternal:!1},{text:"MCPs",routePath:"mcps",base:"/mcps",css:"",target:"_self",isDisabled:!1,displayToUi:!0,isExternal:!1},{text:"LOBs",routePath:"lobs",base:"/lobs",css:"",target:"_self",isDisabled:!1,displayToUi:!0,isExternal:!1},{text:"Infrastructure",routePath:"infrastructure",base:"/infrastructure",css:"",target:"_self",isDisabled:!1,displayToUi:!0,isExternal:!1},{text:"BCA Inventory",routePath:"sites",base:"/sites",css:"hidden-xs",target:"_self",isDisabled:!1,displayToUi:-1!==$.inArray(e.userRoles.nercCip,e.userRole),isExternal:!1}],_.each(n,function(t,a){if(t.active){for(var o={},r=0;r<t.params.length;r++)o[t.params[r]]="object"==typeof e[t.params[r]]?e[t.params[r]].join():e[t.params[r]],o[t.params[r]]="token"==t.params[r]?e.getAuthToken():o[t.params[r]];l.menuItems.push({text:t.label,routePath:t.url,routeParams:"GET"===t.method?"?"+$.param(o):t.params,target:"_blank",isDisabled:!1,displayToUi:t.roles&&t.roles.length>0?_.intersection(t.roles,e.userRole).length>0:!0,isExternal:!0,method:t.method})}}),l.user=t.localStorage.user,l.fullName=t.localStorage.fullName):i()};c(),l.routeChange=function(e){r.path("/"+e.routePath)},l.logout=function(){i()},l.isAdmin=-1!==$.inArray(e.userRoles.admin,e.userRole),l.isNercCip=-1!==$.inArray(e.userRoles.nercCip,e.userRole),l.isActive=function(e){return-1!=r.path().indexOf(e)},l.showAlert=!1,l.navigateWithPost=function(r){var t=$(document.createElement("form")).css({display:"none"}).attr("method","POST").attr("target","_blank").attr("action",r.routePath);_.each(r.routeParams,function(r,o){"object"==typeof e[r]?t.append($(document.createElement("input")).attr("name",r).val(e[r].join())):"token"===r?t.append($(document.createElement("input")).attr("name",r).val(e.getAuthToken())):t.append($(document.createElement("input")).attr("name",r).val(e[r]))}),$("body").append(t),t.submit()}}}}])})}(),function(){"use strict";define("storage-factory",["assetIt"],function(e){var e=angular.module("assetStorage",[]);e.factory("svcStorage",["$cacheFactory","$window",function(t,o){var e=t("cache"),r={put:function(t,r){e.put(t,r)},get:function(e){return!1},remove:function(t){e.remove(t)},removeAll:function(){e.removeAll()},destroy:function(){e.info()}};return r}])})}(),define("assetIt",["angularAMD","underscore","angular-route","bootstrap","ui-bootstrap","bootstrap-popup","angular-sanitize","authentication-factory","header-footer","storage-factory"],function(r,l){var a=["ngRoute","ngSanitize","ui.bootstrap","assetStorage"],s=["bootstrap-popup","assetItAuthentication"],n=a.concat(s),t=angular.module("mainModule",n),e={header:{templateUrl:"app/modules/common/templates/header-template.html"},logOutPopup:{templateUrl:"app/modules/common/templates/logOutPopup.html"},home:{controllerUrl:"modules/home/controllers/home.controller",templateUrl:"app/modules/home/templates/home.html"},feedback:{controllerUrl:"modules/feedback/controllers/feedback.controller",templateUrl:"app/modules/feedback/templates/feedback.html",successUrl:"app/modules/feedback/templates/feedback-success.html",failureUrl:"app/modules/feedback/templates/feedback-error.html"},application:{controllerUrl:"modules/application/controllers/application.controller",multiProcessTemplateUrl:"app/modules/application/templates/multiple-processes.html",multiLobsTemplateUrl:"app/modules/application/templates/multiple-lobs.html",infraTabTemplateUrl:"app/modules/application/templates/app-infra-tab.html",templateUrl:"app/modules/application/templates/application.html",applicationSystemInfoControllerUrl:"modules/application/controllers/bacr.controller",bacrTemplateUrl:"app/modules/application/templates/appInfo/bacr.html",appSystemInfoTemplateUrl:"app/modules/application/templates/appInfo/app-system-info.html",server:{moreDetailsTemplateUrl:"app/modules/application/templates/infra/app-infra-type-more-details.html"},database:{moreDetailsTemplateUrl:"app/modules/application/templates/infra/app-infra-type-more-details.html"},middleware:{moreDetailsTemplateUrl:"app/modules/application/templates/infra/app-infra-type-more-details.html"},certify:{successUrl:"app/modules/application/templates/appInfo/bacr-success.html",failureUrl:"app/modules/application/templates/appInfo/bacr-failure.html"}},error:{controllerUrl:"modules/common/error/controllers/errorController",templateUrl:"app/modules/common/error/templates/error.html"},loading:{templateUrl:"app/modules/common/templates/preloader.html"},mcps:{controllerUrl:"modules/mcps/controllers/mcps.controller",templateUrl:"app/modules/mcps/templates/mcps.html"},lobs:{controllerUrl:"modules/lobs/controllers/lobs.controller",templateUrl:"app/modules/lobs/templates/lobs.html"},users:{controllerUrl:"modules/user/controllers/userController",templateUrl:"app/modules/user/templates/users.html"},feedbackList:{controllerUrl:"modules/feedbackList/controllers/feedback.controller",templateUrl:"app/modules/feedbackList/templates/feedback.html"},sites:{controllerUrl:"modules/sites/controllers/sites.controller",templateUrl:"app/modules/sites/templates/sites.html"},siteExcelImport:{controllerUrl:"modules/site-excel-import/controllers/site-excel-import.controller",templateUrl:"app/modules/site-excel-import/templates/site-excel-import.html",groupModalUrl:"app/modules/site-excel-import/templates/group-modal.html",successPopupUrl:"app/modules/site-excel-import/templates/success-popup.html"},sitesUtility:{controllerUrl:"modules/site-utility-module/controllers/site-utility-module.controller",templateUrl:"app/modules/site-utility-module/templates/site-utility-module.html"},cyberSystems:{controllerUrl:"modules/cyber-systems/controllers/cyber-systems.controller",templateUrl:"app/modules/cyber-systems/templates/cyber-systems.html"},editUser:{controllerUrl:"modules/user/controllers/editUser.controller",templateUrl:"app/modules/user/templates/editUser.html"},infra:{controllerUrl:"modules/infra/controllers/infrastructure.controller",templateUrl:"app/modules/infra/templates/infrastructure.html"},versionT:{templateUrl:"app/modules/common/templates/versionTemplate.html"},permalink:{templateUrl:"app/modules/common/templates/perma-link-popup.html"},siteUtilityVersionDiff:{controllerUrl:"modules/site-utility-version-diff/controllers/site-utility-version-diff.controller",templateUrl:"app/modules/site-utility-version-diff/templates/site-utility-version-diff.html"},splashConfiguration:{controllerUrl:"modules/splash-configuration/controllers/splash-configuration.controller",templateUrl:"app/modules/splash-configuration/templates/splash-configuration.html"},enterpriseAccess:{controllerUrl:"modules/enterprise-access/controllers/enterprise-access.controller",templateUrl:"app/modules/enterprise-access/templates/enterprise-access.html"},auditLogs:{controllerUrl:"modules/audit-logs/controllers/audit-logs.controller",templateUrl:"app/modules/audit-logs/templates/audit-logs.html"}};t.constant("appConstantPath",e),t.decideHierarchyView={viewId:1,queramParamData:"",applicationSearchFilterText:""},t.loadingUi={start:function(){$("#pageLoader").show()},stop:function(){$("#pageLoader").hide()}},t.constant("loadingData",{start:function(){$("#dataLoader").clone().addClass("serviceCall").appendTo("#placeHolderLoading").show()},stop:function(){"function"==typeof $(".serviceCall")[0].remove?$(".serviceCall")[0].remove():$(".serviceCall")[0].removeNode(!0)}}),t.filter("leadingZeroes",function(){return function(t){var e="000"+t;return e=e.substr(e.length-3)}}),t.config(["$httpProvider",function(e){e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],e.defaults.headers.common.Accept="*/*",e.interceptors.push("tokenInterceptor"),e.defaults.cache=!1,e.defaults.timeout=6e5,e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT"}]);var o={login:{controllerUrl:"modules/auth/controllers/loginController",templateUrl:"app/modules/auth/templates/login.html"},register:{controllerUrl:"modules/auth/controllers/registerController",templateUrl:"app/modules/auth/templates/register.html"},registerViaAD:{controllerUrl:"modules/auth/controllers/registerViaADController",templateUrl:"app/modules/auth/templates/registerViaAD.html"},authMessage:{controllerUrl:"modules/auth/controllers/authMessageController",templateUrl:"app/modules/auth/templates/authMessage.html"},resetPassword:{controllerUrl:"modules/auth/controllers/resetPasswordController",templateUrl:"app/modules/auth/templates/resetPassword.html"},forgotPassword:{controllerUrl:"modules/auth/controllers/forgotPasswordController",templateUrl:"app/modules/auth/templates/forgotPassword.html"}};return t.constant("authConstantPath",o),t.config(["$routeProvider","$locationProvider","userRoles",function(l,a,t){l.when("/login",r.route({templateUrl:o.login.templateUrl,controllerUrl:o.login.controllerUrl,access:{requiredLogin:!1}})).when("/register",r.route({templateUrl:o.register.templateUrl,controllerUrl:o.register.controllerUrl,access:{requiredLogin:!1}})).when("/registerViaAD",r.route({templateUrl:o.registerViaAD.templateUrl,controllerUrl:o.registerViaAD.controllerUrl,controller:"RegisterViaADController",controllerAs:"registerViaADController",access:{requiredLogin:!1}})).when("/confirmUser/:activationKey",r.route({templateUrl:o.authMessage.templateUrl,controllerUrl:o.authMessage.controllerUrl,access:{requiredLogin:!1}})).when("/adminAccess/:activationKey",r.route({templateUrl:o.authMessage.templateUrl,controllerUrl:o.authMessage.controllerUrl,access:{requiredLogin:!1}})).when("/successAction/:messageType",r.route({templateUrl:o.authMessage.templateUrl,controllerUrl:o.authMessage.controllerUrl,access:{requiredLogin:!1}})).when("/resetPassword/:resetKey",r.route({templateUrl:o.resetPassword.templateUrl,controllerUrl:o.resetPassword.controllerUrl,access:{requiredLogin:!1}})).when("/forgotPassword",r.route({templateUrl:o.forgotPassword.templateUrl,controllerUrl:o.forgotPassword.controllerUrl,access:{requiredLogin:!1}})).when("/home",r.route({templateUrl:e.home.templateUrl,controllerUrl:e.home.controllerUrl,access:{requiredLogin:!0}})).when("/applications",r.route({templateUrl:e.application.templateUrl,resolve:{load:["$q","$rootScope",function(r,o){var l=e.application.controllerUrl,t=r.defer();return require([l],function(){o.$apply(function(){t.resolve()})}),t.promise}]},access:{requiredLogin:!0}})).when("/applications/:id",r.route({templateUrl:e.application.templateUrl,controllerUrl:e.application.controllerUrl,access:{requiredLogin:!0}})).when("/mcps",r.route({templateUrl:e.mcps.templateUrl,controllerUrl:e.mcps.controllerUrl,access:{requiredLogin:!0}})).when("/lobs",r.route({templateUrl:e.lobs.templateUrl,controllerUrl:e.lobs.controllerUrl,access:{requiredLogin:!0}})).when("/mcps/:code",r.route({templateUrl:e.mcps.templateUrl,controllerUrl:e.mcps.controllerUrl,access:{requiredLogin:!0}})).when("/lobs/:name",r.route({templateUrl:e.lobs.templateUrl,controllerUrl:e.lobs.controllerUrl,access:{requiredLogin:!0}})).when("/users",r.route({templateUrl:e.users.templateUrl,controllerUrl:e.users.controllerUrl,access:{requiredLogin:!0,roles:[t.admin]}})).when("/feedback",r.route({templateUrl:e.feedbackList.templateUrl,controllerUrl:e.feedbackList.controllerUrl,access:{requiredLogin:!0,roles:[t.admin]}})).when("/sites",r.route({templateUrl:e.sitesUtility.templateUrl,controllerUrl:e.sitesUtility.controllerUrl,access:{requiredLogin:!0,roles:[t.nercCip]}})).when("/siteExcelImport",r.route({templateUrl:e.siteExcelImport.templateUrl,controllerUrl:e.siteExcelImport.controllerUrl,controller:"siteExcelImportController",access:{requiredLogin:!0,roles:[t.nercCip]}})).when("/infrastructure",r.route({templateUrl:function(){return e.infra.templateUrl},controllerUrl:e.infra.controllerUrl,access:{requiredLogin:!0}})).when("/VersionDiff",r.route({templateUrl:function(){return e.siteUtilityVersionDiff.templateUrl},controllerUrl:e.siteUtilityVersionDiff.controllerUrl,access:{requiredLogin:!0,roles:[t.nercCip]}})).when("/auditLogs",r.route({templateUrl:function(){return e.auditLogs.templateUrl},controllerUrl:e.auditLogs.controllerUrl,access:{requiredLogin:!0,roles:[t.admin]}})).otherwise({redirectTo:"/login"})}]),t.run(["$rootScope","$window","$location","$interval","authenticationFactory","$q","popupService","headerFooterDecisionMaker","idleLogout","configUrl","$http",function(r,d,o,p,a,n,s,i,u,m,f){function c(){return"/home"}t.loadingUi.start(),u(),a.check(),i.defineHeader(r),r.isAlert=!1,r.$on("$routeChangeStart",function(s,e,n){t.loadingUi.start(),e.access&&e.access.requiredLogin&&!a.isLogged?(window.currentRoute=o.path(),o.path("/login")):(i.defineHeader(r),a.setAuthInfoFromStorage(),e.access&&e.access.roles&&l.intersection(e.access.roles,a.userRole).length<=0&&o.path(c()))}),r.$on("$routeChangeSuccess",function(e,t,r){1==a.isLogged&&"/login"==o.path()&&o.path(c())}),r.$on("$routeChangeError",function(e,r,o,l){t.loadingUi.stop()}),r.$on("$viewContentLoaded",function(){t.loadingUi.stop()}),r.openFeedback=function(o,l){r.appId=l,r.context=o;var t=n.defer();return require([e.feedback.controllerUrl],function(){r.$apply(function(){t.resolve(s.showFeedbackPopup())})}),t.promise},r.openEnterpriseAccess=function(){var t=n.defer();return require([e.enterpriseAccess.controllerUrl],function(){r.$apply(function(){t.resolve(s.showEnterpriseAccessPopup())})}),t.promise},r.isSafari="true"==localStorage.getItem("isSafari")?!0:!1,$(document).on("click","tbody .permalink-wrapper",function(r){var e=window.location,t=$(r.currentTarget),o=e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")+e.pathname+"#/"+t.attr("attr-base")+"/"+t.attr("attr-permalink-key"),l={key:o};s.showPermalinkPopup(l)})}]),angular.element(document).ready(function(){var e=angular.injector(["ng"]),o=e.get("$http"),l=e.get("$window");o.get("config.json").then(function(e){e.data.baseUrl.secureUrl=e.data.baseUrl.authServiceUrl+e.data.baseUrl.secureUrl,t.constant("configUrl",e.data.baseUrl),t.constant("configOptions",e.data.options),t.constant("environments",e.data.environments),t.constant("userRoles",e.data.userRoles),t.constant("autoLogOutMinutes",e.data.autoLogOutMinutes),t.constant("externalLinks",e.data.externalLinks),t.constant("besDefaultColumns",e.data.besDefaultColumns),t.constant("isMobileView",l.innerWidth<768),r.bootstrap(t)},function(e){throw new Error("Config file has error : "+e)})}),t.factory("idleLogout",["$window","autoLogOutMinutes","authenticationFactory","popupService","authService",function(e,t,r,o,l){var a=function(){function n(){r.isLogged&&(l.logout(),o.openLogOutPopup().then(function(){e.location.reload(!0)},function(){e.location.reload(!0)}))}function a(){clearTimeout(s),s=setTimeout(n,60*parseInt(t)*1e3)}var s;e.onload=a,e.onmousemove=a,e.onmousedown=a,e.onclick=a,e.onscroll=a,e.onkeypress=a};return a}]),t});