!function(){"use strict";define(["assetIt","app-config","appInfra-model","appInfra-service"],function(e){e.register.directive("appInfraGridsWrapper",["appInfraModel","appInfraService","appConfig",function(a,t,e){return{restrict:"AE",templateUrl:"app/modules/application/templates/app-infra-grids-wrapper.html",scope:{key:"@"},link:function(e,t,a){},controller:["$scope",function(r){function a(e,i,t){e.activeFilter=t.item;var a=[];angular.extend(a,r.infraEnvironments[i].originalData),e.data=_.filter(a,function(e){return Boolean(e.RELName.match(t.filterKey))})}function n(e){$.each(i,function(r,t){var a=_.filter(e,function(e){return Boolean(s[r].filterKeyFunction(e.RELUser_Display_Object_Name))});t.data=a,t.originalData=a})}var o=[{item:"All",filterKey:"",filterData:a},{item:"Production",filterKey:"^((?!QA|TST|DEV).)*$",filterData:a},{item:"QA",filterKey:"QA",filterData:a},{item:"Test",filterKey:"TST",filterData:a},{item:"Development",filterKey:"DEV",filterData:a}],i={server:{name:"SERVER",activeFilter:"All",data:[],originalData:[],filters:o},database:{name:"DATABASE",activeFilter:"All",data:[],originalData:[],filters:o}};r.infraEnvironments=i,r.infraArray=[{key:"server",seq:1,envi:i.server},{key:"database",seq:2,envi:i.database}];var s={server:{filterKeyFunction:function(e){return"database"!=e.toLowerCase().trim()}},database:{filterKeyFunction:function(e){return"database"==e.toLowerCase().trim()}}},l=e.getApplication();void 0!=l.INFRASTRUCTURE?n(l.INFRASTRUCTURE):t.createInfraEnvironmentView(r.key).then(function(t){t.isSuccess?(e.updateInfra(t.response),n(t.response)):e.updateInfra([])},function(t){e.updateInfra([])})}]}}]),e.register.directive("infraEnvironmentGrid",["$rootScope","appInfraModel","popupService","appInfraService",function(e,t,a,r){return{restrict:"AE",scope:{data:"=",type:"@",changeDataFn:"@"},link:function(e,t,a){t.kendoGrid({dataSource:{pageSize:20,data:[]},autoBind:!0,scrollable:!1,groupable:!1,selectable:!1,resizable:!0,columns:[{field:"BDAssetClass",title:"Asset"},{field:"RELUser_Display_Object_Name",title:"Asset Object"},{field:"RELName",title:"Name"},{field:"RELModel",title:"Model"},{field:"RELVersionNumber",title:"OS Version"}],dataBound:function(e){var t=e.sender;if(0==t.dataSource.total()){var a=t.columns.length;$(e.sender.wrapper).find("tbody").append('<tr class="kendo-data-row"><td colspan="'+a+'">No Record available..</td></tr>')}}}),e.$watch("data",function(a){t.data("kendoGrid").dataSource.data(e.data)},!0)}}}])})}();