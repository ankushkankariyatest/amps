!function(){"use strict";define(["assetIt","app-config","appInfra-model","appInfra-service"],function(e){e.register.directive("appInfraTabWrapper",["appInfraModel",function(e){return{restrict:"AE",templateUrl:"app/modules/application/templates/app-infra.html",scope:{key:"@"},controller:["$scope",function(t){t.openActiveTab=function(a){e.setModel({appId:t.key,type:a}),t.tabsInfo=e.getActiveInfrastructureTab();var i="app/modules/application/templates/infra/app-infra-grid.html",r={server:[{title:"Production",isOpen:!1,filterKey:"^((?!QA|TST|DEV).)*$",templateUrl:i},{title:"QA",isOpen:!1,filterKey:"QA",templateUrl:i},{title:"Test",isOpen:!1,filterKey:"TST",templateUrl:i},{title:"Development",isOpen:!1,filterKey:"DEV",templateUrl:i}],database:[{title:"Production",isOpen:!1,filterKey:"^((?!QA|TST|DEV).)*$",templateUrl:i},{title:"QA",isOpen:!1,filterKey:"QA",templateUrl:i},{title:"Test",isOpen:!1,filterKey:"TST",templateUrl:i},{title:"Development",isOpen:!1,filterKey:"DEV",templateUrl:i}]},n=e.getModel();t.accordianItems=r[n.type]}}]}}]),e.register.directive("appInfraTabGrid",["$rootScope","appInfraModel","appInfraService","popupService","appConfig",function(i,e,t,a,r){return{restrict:"AE",scope:{activeData:"=",popup:"="},link:function(s,n,l){function p(a){var t=e.getModel(),r=s.activeData,i=[];"database"==t.type&&(i=_.filter(a,function(e){return Boolean(t.type==e.RELUser_Display_Object_Name.toLowerCase().trim()&&e.RELName.match(r.filterKey))})),"server"==t.type&&(i=_.filter(a,function(e){return Boolean("database"!=e.RELUser_Display_Object_Name.toLowerCase().trim()&&e.RELName.match(r.filterKey))})),n.data("kendoGrid").dataSource.data(i)}n.kendoGrid({dataSource:{pageSize:20,schema:{model:{fields:{BEAssetID:{type:"string"},BDAssetClass:{type:"string"},RELItem:{type:"string"},RELModel:{type:"string"},RELName:{type:"string"},RELUser_Display_Object_Name:{type:"string"},BEClassId:{type:"string"},BEDatasetId:{type:"string"},BEDescription:{type:"string"},BEInstanceId:{type:"string"},BEName:{type:"string"},BEReconciliationIdentity:{type:"string"},BESerialNumber:{type:"string"},BEShortDescription:{type:"string"},RELAssetReconciliationIdentity:{type:"string"},RELAsset_Class_Id:{type:"string"},RELAsset_Instance_ID:{type:"string"},RELCategory:{type:"string"},RELClass_Id:{type:"string"},RELDatasetId:{type:"string"},RELInstance_Id:{type:"string"},RELVersionNumber:{type:"string"},RELRelationshipName:{type:"string"},"RELSource.ReconciliationIdentity":{type:"string"},RELType:{type:"string"},Request_ID:{type:"string"}}}},data:[]},dataBound:function(e){var t=e.sender;if(0==t.dataSource.total()){var i=t.columns.length;$(e.sender.wrapper).find("tbody").append('<tr class="kendo-data-row"><td colspan="'+i+'"><div class="text-center" style="margin-top: 100px"> No Records available</div></td></tr>')}},autoBind:!0,scrollable:!0,groupable:!1,selectable:!1,resizable:!0,columns:[{field:"BDAssetClass",title:"Asset"},{field:"RELUser_Display_Object_Name",title:"Asset Object"},{field:"RELName",title:"Name"},{field:"RELModel",title:"Model"},{field:"RELVersionNumber",title:"OS Version"},{command:[{name:"More Details",click:function(r){r.preventDefault();var n=this.dataItem($(r.currentTarget).closest("tr"));e.setEnvDetailData(n);var s=e.getModel();a.showInfrastructureDetails(s.type),t.getInfraDetailsByEnvironment(n.RELAsset_Instance_ID).then(function(e){i.infraEnvDetails=e.response})}}],width:"120px",attributes:{"class":"notForPdf"}}],height:"274px"});r.getApplication();t.createInfrastructureTypeView().then(function(e){e.isSuccess&&p(e.response)})}}}])})}();