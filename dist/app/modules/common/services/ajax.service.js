!function(){"use strict";define(["assetIt","notify-service"],function(r){r.register.service("ajaxService",["$http","$q","$timeout","svcStorage","configUrl","loadingData","notifyService",function(e,t,i,c,n,r,s){var o=function(r,t){if(n.sendErrorInMail){var s={from:"am4it@wizni.com",to:n.errorEmailReceipient,subject:"AMPS Front End Error",html:"Request <br />"+JSON.stringify(r)+"<br /><br/>Response <br />"+JSON.stringify(t)};e({url:n.baseServiceUrl+"sendemail",method:"POST",data:s}).then()}};this.httpPost=function(c,u,a){r.start(),c.url=n.baseServiceUrl+c.url;var i=t.defer();return e(c).success(function(e){r.stop(),i.resolve(e)}).error(function(e,t,n,u){r.stop(),o(c,e),s.notifyError(e,t,n,u),i.reject(e)}),i.promise},this.httpSimulatePost=function(c,i,u){r.start();var n=t.defer();return e(c).success(function(e){r.stop(),n.resolve(e)}).error(function(e,t,i,u){r.stop(),o(c,e),s.notifyError(e,t,i,u),n.reject(e)}),n.promise},this.httpGet=function(i,l,p,v){i.url=n.baseServiceUrl+i.url,i.cache=!1;var a=i.url,f=c.get(a),u=t.defer();return f?u.resolve(f):(r.start(),e(i).success(function(e){r.stop(),c.put(a,e),u.resolve(e)}).error(function(e,t,n,c){r.stop(),o(i,e),s.notifyError(e,t,n,c),u.reject(e)})),u.promise},this.httpPut=function(c,u,a,f){r.start(),c.url=n.baseServiceUrl+c.url,c.cache=!1;var i=t.defer();return e(c).success(function(e){r.stop(),i.resolve(e)}).error(function(e,t,n,u){r.stop(),o(c,e),s.notifyError(e,t,n,u),i.reject(e)}),i.promise},this.httpAuthGet=function(i,l,p){i.url=n.secureUrl+i.url,i.cache=!1;var a=i.url,f=c.get(a),u=t.defer();return f?u.resolve(f):(r.start(),e(i).success(function(e){r.stop(),c.put(a,e),u.resolve(e)}).error(function(e,t,n,c){r.stop(),o(i,e),s.notifyError(e,t,n,c),u.reject(e)})),u.promise},this.httpAuthPut=function(c,u,a){r.start(),c.url=n.secureUrl+c.url,c.cache=!1;var i=t.defer();return e(c).success(function(e){r.stop(),i.resolve(e)}).error(function(e,t,n,u){r.stop(),o(c,e),s.notifyError(e,t,n,u),i.reject(e)}),i.promise},this.httpSimulateGet=function(n,i,u,a){r.start();var c=t.defer();return n.params=n.params?n.params:{},n.params.time=Date.now(),e(n).success(function(e){r.stop(),e.isSuccess?c.resolve(e):c.resolve(e)}).error(function(e,t,i,u){r.stop(),o(n,e),s.notifyError(e,t,i,u),c.reject(e)}),c.promise},this.httpParrallelGet=function(i){var f=[],u={};angular.forEach(i.requests,function(e,t){u[t]=e.url;var r=e;r.url=n.baseServiceUrl+r.url,r.cache=!1});var l=c.get(i.serviceName),p=l?!1:!0,a=t.defer();return p?(angular.forEach(i.requests,function(r,t){f.push(e(r))}),r.start(),t.all(f).then(function(e){r.stop(),angular.forEach(i.requests,function(t,r){u[r]=e[r].data}),c.put(i.serviceName,u),a.resolve(u)},function(e){r.stop(),o(i.requests,e),s.notifyError(e.data,e.status,void 0,e.statusText),a.reject(e)})):(u=c.get(i.serviceName),a.resolve(u)),a.promise},this.http=function(c){c.url=n.baseServiceUrl+c.url,c.cache=!1,r.start();var i=t.defer();return e(c).success(function(e){r.stop(),i.resolve(e)}).error(function(e,t,n,u){r.stop(),o(c,e),s.notifyError(e,t,n,u),i.reject(e)}),i.promise},this.httpAlwaysServerGet=function(c,u,a,f){r.start(),c.url=n.baseServiceUrl+c.url,c.cache=!1;var i=t.defer();return e(c).success(function(e){r.stop(),i.resolve(e)}).error(function(e,t,n,u){r.stop(),o(c,e),s.notifyError(e,t,n,u),i.reject(e)}),i.promise},this.httpAsyncSimulateGet=function(n,c,i,u){var r=t.defer();return e(n).success(function(e){e.isSuccess?r.resolve(e):r.resolve(e)}).error(function(e,t,c,i){o(n,e),s.notifyError(e,t,c,i),r.reject(e)}),r.promise},this.httpAsyncSimulatePost=function(n,c,i){var r=t.defer();return e(n).success(function(e){r.resolve(e)}).error(function(e,t,c,i){o(n,e),s.notifyError(e,t,c,i),r.reject(e)}),r.promise}}])})}();