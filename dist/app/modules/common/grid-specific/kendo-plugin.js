!function(){"use strict";define(["assetIt","kendo.all.min","export-util"],function(t){t.register.directive("kendoPlugin",["exportUtil",function(t){return{restrict:"AE",scope:{config:"=",gridOptions:"=?",filterGridFn:"=?",highlightFn:"=?",showPopup:"&?",customFn:"&?",exportTo:"=?",searchTextData:"=?",filterGridByFilterPlugin:"=?"},link:function(e,i,r){var n,o={dataSource:e.config.dataSource,sortable:{mode:"single",allowUnsort:!1},autoBind:!0,scrollable:!1,groupable:!1,selectable:!1,pageable:{refresh:!1,input:!0,numeric:!1,pageSize:20,pageSizes:[20,50,100,200]},resizable:!0,columns:e.config.columns,detailExpand:function(t){$(".open").removeClass("open"),$("ul.dropdown-menu.dropdown-menu-form").css("display","none"),null!=n&&n[0]!=t.masterRow[0]&&i.data("kendoGrid").collapseRow(n),n=t.masterRow,e.highlightFn(e.searchTextData)},detailCollapse:function(t){$(".open").removeClass("open"),$("ul.dropdown-menu.dropdown-menu-form").css("display","none")}};o.dataSource.error=function(t){i.find(".k-grid-content tbody").html('<tr><td colspan="5"><div class="text-center">'+t.xhr.message+"</div></td></tr>")},angular.extend(o,e.config);var d=i.kendoGrid(o);d.data("kendoGrid").dataSource.bind("change",function(t){e.highlightFn(e.searchTextData)}),e.filterGridFn=function(t,n){0==t.length&&(n={}),e.searchTextData=t,i.data("kendoGrid").dataSource.filter(n),e.highlightFn(t)},e.filterGridByFilterPlugin=function(t,n){n?(e.searchTextData="",i.data("kendoGrid").dataSource.filter({})):i.data("kendoGrid").dataSource.filter(t)},e.config.refreshGrid=function(t,e){i.data("kendoGrid").dataSource.group([]),i.data("kendoGrid").setOptions({columns:t}),i.data("kendoGrid").refresh()},e.config.updateGrid=function(t){i.data("kendoGrid").dataSource.data(t)},e.highlightFn=function(t){t&&t.length>0?(i.find("tbody tr td").highlight(t),i.find("tbody tr.k-master-row").highlight(t),i.find("tbody tr.k-detail-row td").highlight(t),i.find("tbody tr.k-detail-row .assetIT-main-app_details_block").highlight(t)):e.unhighlightFn()},e.unhighlightFn=function(){i.find("tbody tr").unhighlight()},e.exportTo=function(e){switch(e){case"excel":t.exportToExcel(i.data("kendoGrid"));break;case"csv":t.exportToCsv(i.data("kendoGrid"));break;case"pdf":t.exportToPdf(i.data("kendoGrid"))}};var a=function(t){t()};e.customFunc=function(t,i){e.$evalAsync(e.customFn()(t,i,a))},$("div.gridRequiredClass").on("mouseover","table tbody tr td:nth-child(2)",function(t){$(this).find("a.permalink-wrapper").show()}),$("div.gridRequiredClass").on("mouseout","table tbody tr td:nth-child(2)",function(t){$(this).find("a.permalink-wrapper").hide()}),$("div.gridRequiredClass").on("click","td:nth-child(2) span.info",function(){n&&n[0]==$(this).closest("tr")[0]?(i.data("kendoGrid").collapseRow(n),n=null):i.data("kendoGrid").expandRow($(this).closest("tr"))})}}}])})}();