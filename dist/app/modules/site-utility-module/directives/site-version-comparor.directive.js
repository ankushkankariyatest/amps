!function(){"use strict";define(["assetIt"],function(e){e.register.controller("siteVersionComparorController",["$scope","siteUtilityModuleServices",function(r,t){var e=this;e.showDifference={};var o=[];_.each(r.keys,function(e,t){o.push({col:e,val:r.rowData[e]})});var i={sheetName:r.sheetName,key:o};t.getHistoryData(i).then(function(r){r=_.sortBy(r,"createdAt").reverse(),e.siteDetail=r}),e.compareVersionsTab=function(){if(!isNaN(e.comparerFromVersion)&&!isNaN(e.comparerToVersion)){var r=_.find(e.siteDetail,{version:Number(e.comparerToVersion)}),o=_.find(e.siteDetail,{version:Number(e.comparerFromVersion)});if(angular.equals(r.recordData,o.recordData)){var t={isDiff:!1};e.comparorModel=t}else{var t={isDiff:!0,currentVersion:e.comparerFromVersion,currentVersionDate:o.createdAt,currentRowVersionData:o.recordData,selectedVersion:e.comparerToVersion,selectedVersionDate:r.createdAt,selectedVersionData:r.recordData,compareKeysData:_.union(_.keys(r.recordData),_.keys(o.recordData))};e.comparorModel=t}e.showDifference.value=!0}}}]),e.register.directive("siteVersionComparor",function(){return{restrict:"AE",templateUrl:"app/modules/site-utility-module/templates/site-tabs/site-version-comparor.html",scope:{rowData:"=",sheetName:"=",cols:"=",title:"@",keys:"="},controller:"siteVersionComparorController",controllerAs:"siteVersionComparorCtrl",link:function(e,r,o){}}})})}();