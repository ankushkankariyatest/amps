!function(){define(["assetIt","audit-logs-service","audit-logs-model","ui-bootstrap","filter-options","kendo-plugin"],function(t){t.register.controller("auditLogsController",["$scope","$rootScope","auditLogsService","auditLogsModel",function(t,r,i,e){function a(e){var t="";switch(e){case 1:t="Active";break;case 0:t="Inactive";break;default:t=""}return t}function o(e){var t="";switch(e){case 1:t="AMPS Admin";break;case 2:t="NERC CIP";break;case 3:t="Enterprise";break;default:t=""}return t}t.initializeController=function(){t.auditLogsConfig=e.getAuditLogsConfig(),n()};var n=function(){i.getLogs().then(function(e){_.each(e,function(t,n){t.createdAt=new Date(t.createdAt).toUTCString();var e="";if(t.dataObject)if(angular.equals(t.dataObject.old,t.dataObject["new"]))e="No change";else if(t.dataObject.old.status!==t.dataObject["new"].status&&(e+="Status changed from "+a(t.dataObject.old.status)+" to "+a(t.dataObject["new"].status)+"<br>"),!angular.equals(_.sortBy(t.dataObject.old.roles),_.sortBy(t.dataObject["new"].roles))){e+="Previous Role(s): ";var i=[];_.each(t.dataObject.old.roles,function(t,e){i.push(o(t))}),e+=i.join(),e+="<br>New Role(s): ",i=[],_.each(t.dataObject["new"].roles,function(t,e){i.push(o(t))}),e+=i.join()}t.changes=e}),t.auditLogsConfig.updateGrid(e)})};t.filterGridRecord=function(a){var o=e.getAuditLogsConfig();t.filterGrid(a,o.getDefaultFilterWithFilterText(a))}}])})}();