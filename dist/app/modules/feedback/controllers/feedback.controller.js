!function(){"use strict";define(["assetIt","feedback-model","feedback-service","feedback-validation","upload-directive"],function(e){e.register.controller("feedbackController",["$scope","feedbackModel","feedbackService","feedbackValidation",function(e,a,t,o){e.initializeController=function(){e.feedback=a.initializeFeedback(),e.uploadFile={success:!1},e.totalCount=250,e.remainingCount=250,e.dropdown=a.getDropdown()},e.updateCount=function(){e.remainingCount=e.feedback.message.length>=e.totalCount?0:e.totalCount-e.feedback.message.length,e.feedback.message=e.feedback.message.substring(0,e.totalCount)},e.sendFeedBack=function(){e.feedback.fileUpload.data=e.uploadFile.success===!0?String(e.uploadFile.src).split("base64,")[1]:"",e.feedback.fileUpload.name=e.uploadFile.success===!0?e.uploadFile.name:"",a.setFeedbackModel(e.feedback);var d=o.isValidFeedbackForm(e.subject);d.isValid?t.sendFeedback(e.subject):(e.error=d,"$apply"!=e.$root.$$phase&&"$digest"!=e.$root.$$phase&&e.$apply())}}])})}();